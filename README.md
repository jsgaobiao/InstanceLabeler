# Instance labeler 说明文档

本工程用于在point labeler标注的基础上，对于instance级别的物体（人、车、骑车人）进行标注。

运行系统：Ubuntu

所需环境：Qt, OpenCV

运行参数：

```
./InstanceLabeler [label_dir] [colortable]
```

例如： ./InstanceLabeler 4_labelled colortable.txt

## 操作说明

**注意：显示场景中所有instance类别（人、车、骑车人）的俯视投影，有instance id的会生成随机颜色，没有instance id的将显示colortable.txt中指定的物体类别颜色**

**操作说明：**

|    按键    |                说明                 |                    备注                     |
| :--------: | :---------------------------------: | :-----------------------------------------: |
|  Alt+左键  |              拖动窗口               |                                             |
| Ctrl+左键  |          选中某个instance           |                                             |
| Ctrl+右键  |    隐藏某个已经标注好的instance     |                                             |
|  鼠标左键  |           多边形框选/画刷           | 将多边形/画刷中的点标记为当前选中的instance |
|  鼠标右键  |      多边形画好后，按右键确认       |                                             |
|  鼠标滚轮  |            调整画刷大小             |              仅画刷模式下有效               |
|     P      |         切换多边形/画刷模式         |                                             |
|     Q      |         切换单帧/多帧可视化         |                                             |
|     F      |     显示/隐藏选中的部分instance     |                                             |
|  4,5,6,7   |          增加一个instance           |    4（人）5（多人）6（骑车人）7（汽车）     |
|     D      | 删除当前多边形内的点，标记为unlabel |                                             |
|     S      |                保存                 |            标注过程中请及时保存             |
|    Esc     |          清除已选的多边形           |                                             |
| 左右方向键 |     单帧可视化状态下调整前后帧      |                                             |

## 标注操作

1. **将点添加到instance**： **Ctrl+左键**选择一个Instance，用**画刷或多边形**框选物体，框内的所有点云会被标记为选中的instance
2. **新建instance**：根据物体的类别，按下**数字键**（例如新建一个汽车的instance，就按7），然后用**画刷或多边形**框选物体，框内的所有点云会被标记为新建的instance
3. **删除噪点（慎用）：**如果存在明显的噪点需要删除，用**多边形**框选出后，按下**D键**
4. **单帧标注**：用**Q键**切换多帧/单帧可视化，**左右方向键**调整前后帧



**注意：**

1. **轨迹有重合的物体可以用单帧标记后，Ctrl+右键将其隐藏，再标注其他物体**
2. **距离图像可以辅助检验标注的正确性**